{"ast":null,"code":"/*\nCopyright (c) 2019 Daybrush\nname: gesto\nlicense: MIT\nauthor: Daybrush\nrepository: git+https://github.com/daybrush/gesto.git\nversion: 1.19.4\n*/\nimport EventEmitter from '@scena/event-emitter';\nimport { removeEvent, addEvent, now, isWindow, getWindow } from '@daybrush/utils';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\n/* global Reflect, Promise */\n\nvar extendStatics = function (d, b) {\n  extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n  };\n  return extendStatics(d, b);\n};\nfunction __extends(d, b) {\n  extendStatics(d, b);\n  function __() {\n    this.constructor = d;\n  }\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\nvar __assign = function () {\n  __assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nfunction getRad(pos1, pos2) {\n  var distX = pos2[0] - pos1[0];\n  var distY = pos2[1] - pos1[1];\n  var rad = Math.atan2(distY, distX);\n  return rad >= 0 ? rad : rad + Math.PI * 2;\n}\nfunction getRotatiion(touches) {\n  return getRad([touches[0].clientX, touches[0].clientY], [touches[1].clientX, touches[1].clientY]) / Math.PI * 180;\n}\nfunction isMultiTouch(e) {\n  return e.touches && e.touches.length >= 2;\n}\nfunction getEventClients(e) {\n  if (!e) {\n    return [];\n  }\n  if (e.touches) {\n    return getClients(e.touches);\n  } else {\n    return [getClient(e)];\n  }\n}\nfunction isMouseEvent(e) {\n  return e && (e.type.indexOf(\"mouse\") > -1 || \"button\" in e);\n}\nfunction getPosition(clients, prevClients, startClients) {\n  var length = startClients.length;\n  var _a = getAverageClient(clients, length),\n    clientX = _a.clientX,\n    clientY = _a.clientY,\n    originalClientX = _a.originalClientX,\n    originalClientY = _a.originalClientY;\n  var _b = getAverageClient(prevClients, length),\n    prevX = _b.clientX,\n    prevY = _b.clientY;\n  var _c = getAverageClient(startClients, length),\n    startX = _c.clientX,\n    startY = _c.clientY;\n  var deltaX = clientX - prevX;\n  var deltaY = clientY - prevY;\n  var distX = clientX - startX;\n  var distY = clientY - startY;\n  return {\n    clientX: originalClientX,\n    clientY: originalClientY,\n    deltaX: deltaX,\n    deltaY: deltaY,\n    distX: distX,\n    distY: distY\n  };\n}\nfunction getDist(clients) {\n  return Math.sqrt(Math.pow(clients[0].clientX - clients[1].clientX, 2) + Math.pow(clients[0].clientY - clients[1].clientY, 2));\n}\nfunction getClients(touches) {\n  var length = Math.min(touches.length, 2);\n  var clients = [];\n  for (var i = 0; i < length; ++i) {\n    clients.push(getClient(touches[i]));\n  }\n  return clients;\n}\nfunction getClient(e) {\n  return {\n    clientX: e.clientX,\n    clientY: e.clientY\n  };\n}\nfunction getAverageClient(clients, length) {\n  if (length === void 0) {\n    length = clients.length;\n  }\n  var sumClient = {\n    clientX: 0,\n    clientY: 0,\n    originalClientX: 0,\n    originalClientY: 0\n  };\n  var minLength = Math.min(clients.length, length);\n  for (var i = 0; i < minLength; ++i) {\n    var client = clients[i];\n    sumClient.originalClientX += \"originalClientX\" in client ? client.originalClientX : client.clientX;\n    sumClient.originalClientY += \"originalClientY\" in client ? client.originalClientY : client.clientY;\n    sumClient.clientX += client.clientX;\n    sumClient.clientY += client.clientY;\n  }\n  if (!length) {\n    return sumClient;\n  }\n  return {\n    clientX: sumClient.clientX / length,\n    clientY: sumClient.clientY / length,\n    originalClientX: sumClient.originalClientX / length,\n    originalClientY: sumClient.originalClientY / length\n  };\n}\nvar ClientStore = /*#__PURE__*/function () {\n  function ClientStore(clients) {\n    this.prevClients = [];\n    this.startClients = [];\n    this.movement = 0;\n    this.length = 0;\n    this.startClients = clients;\n    this.prevClients = clients;\n    this.length = clients.length;\n  }\n  ClientStore.prototype.getAngle = function (clients) {\n    if (clients === void 0) {\n      clients = this.prevClients;\n    }\n    return getRotatiion(clients);\n  };\n  ClientStore.prototype.getRotation = function (clients) {\n    if (clients === void 0) {\n      clients = this.prevClients;\n    }\n    return getRotatiion(clients) - getRotatiion(this.startClients);\n  };\n  ClientStore.prototype.getPosition = function (clients, isAdd) {\n    if (clients === void 0) {\n      clients = this.prevClients;\n    }\n    var position = getPosition(clients || this.prevClients, this.prevClients, this.startClients);\n    var deltaX = position.deltaX,\n      deltaY = position.deltaY;\n    this.movement += Math.sqrt(deltaX * deltaX + deltaY * deltaY);\n    this.prevClients = clients;\n    return position;\n  };\n  ClientStore.prototype.getPositions = function (clients) {\n    if (clients === void 0) {\n      clients = this.prevClients;\n    }\n    var prevClients = this.prevClients;\n    var startClients = this.startClients;\n    var minLength = Math.min(this.length, prevClients.length);\n    var positions = [];\n    for (var i = 0; i < minLength; ++i) {\n      positions[i] = getPosition([clients[i]], [prevClients[i]], [startClients[i]]);\n    }\n    return positions;\n  };\n  ClientStore.prototype.getMovement = function (clients) {\n    var movement = this.movement;\n    if (!clients) {\n      return movement;\n    }\n    var currentClient = getAverageClient(clients, this.length);\n    var prevClient = getAverageClient(this.prevClients, this.length);\n    var deltaX = currentClient.clientX - prevClient.clientX;\n    var deltaY = currentClient.clientY - prevClient.clientY;\n    return Math.sqrt(deltaX * deltaX + deltaY * deltaY) + movement;\n  };\n  ClientStore.prototype.getDistance = function (clients) {\n    if (clients === void 0) {\n      clients = this.prevClients;\n    }\n    return getDist(clients);\n  };\n  ClientStore.prototype.getScale = function (clients) {\n    if (clients === void 0) {\n      clients = this.prevClients;\n    }\n    return getDist(clients) / getDist(this.startClients);\n  };\n  ClientStore.prototype.move = function (deltaX, deltaY) {\n    this.startClients.forEach(function (client) {\n      client.clientX -= deltaX;\n      client.clientY -= deltaY;\n    });\n    this.prevClients.forEach(function (client) {\n      client.clientX -= deltaX;\n      client.clientY -= deltaY;\n    });\n  };\n  return ClientStore;\n}();\nvar INPUT_TAGNAMES = [\"textarea\", \"input\"];\n/**\n * You can set up drag, pinch events in any browser.\n */\nvar Gesto = /*#__PURE__*/function (_super) {\n  __extends(Gesto, _super);\n  /**\n   *\n   */\n  function Gesto(targets, options) {\n    if (options === void 0) {\n      options = {};\n    }\n    var _this = _super.call(this) || this;\n    _this.options = {};\n    _this.flag = false;\n    _this.pinchFlag = false;\n    _this.data = {};\n    _this.isDrag = false;\n    _this.isPinch = false;\n    _this.clientStores = [];\n    _this.targets = [];\n    _this.prevTime = 0;\n    _this.doubleFlag = false;\n    _this._useMouse = false;\n    _this._useTouch = false;\n    _this._useDrag = false;\n    _this._dragFlag = false;\n    _this._isTrusted = false;\n    _this._isMouseEvent = false;\n    _this._isSecondaryButton = false;\n    _this._preventMouseEvent = false;\n    _this._prevInputEvent = null;\n    _this._isDragAPI = false;\n    _this._isIdle = true;\n    _this._preventMouseEventId = 0;\n    _this._window = window;\n    _this.onDragStart = function (e, isTrusted) {\n      if (isTrusted === void 0) {\n        isTrusted = true;\n      }\n      if (!_this.flag && e.cancelable === false) {\n        return;\n      }\n      var isDragAPI = e.type.indexOf(\"drag\") >= -1;\n      if (_this.flag && isDragAPI) {\n        return;\n      }\n      _this._isDragAPI = true;\n      var _a = _this.options,\n        container = _a.container,\n        pinchOutside = _a.pinchOutside,\n        preventWheelClick = _a.preventWheelClick,\n        preventRightClick = _a.preventRightClick,\n        preventDefault = _a.preventDefault,\n        checkInput = _a.checkInput,\n        dragFocusedInput = _a.dragFocusedInput,\n        preventClickEventOnDragStart = _a.preventClickEventOnDragStart,\n        preventClickEventOnDrag = _a.preventClickEventOnDrag,\n        preventClickEventByCondition = _a.preventClickEventByCondition;\n      var useTouch = _this._useTouch;\n      var isDragStart = !_this.flag;\n      _this._isSecondaryButton = e.which === 3 || e.button === 2;\n      if (preventWheelClick && (e.which === 2 || e.button === 1) || preventRightClick && (e.which === 3 || e.button === 2)) {\n        _this.stop();\n        return false;\n      }\n      if (isDragStart) {\n        var activeElement = _this._window.document.activeElement;\n        var target = e.target;\n        if (target) {\n          var tagName = target.tagName.toLowerCase();\n          var hasInput = INPUT_TAGNAMES.indexOf(tagName) > -1;\n          var hasContentEditable = target.isContentEditable;\n          if (hasInput || hasContentEditable) {\n            if (checkInput || !dragFocusedInput && activeElement === target) {\n              // force false or already focused.\n              return false;\n            }\n            // no focus\n            if (activeElement && (activeElement === target || hasContentEditable && activeElement.isContentEditable && activeElement.contains(target))) {\n              if (dragFocusedInput) {\n                target.blur();\n              } else {\n                return false;\n              }\n            }\n          } else if ((preventDefault || e.type === \"touchstart\") && activeElement) {\n            var activeTagName = activeElement.tagName.toLowerCase();\n            if (activeElement.isContentEditable || INPUT_TAGNAMES.indexOf(activeTagName) > -1) {\n              activeElement.blur();\n            }\n          }\n          if (preventClickEventOnDragStart || preventClickEventOnDrag || preventClickEventByCondition) {\n            addEvent(_this._window, \"click\", _this._onClick, true);\n          }\n        }\n        _this.clientStores = [new ClientStore(getEventClients(e))];\n        _this._isIdle = false;\n        _this.flag = true;\n        _this.isDrag = false;\n        _this._isTrusted = isTrusted;\n        _this._dragFlag = true;\n        _this._prevInputEvent = e;\n        _this.data = {};\n        _this.doubleFlag = now() - _this.prevTime < 200;\n        _this._isMouseEvent = isMouseEvent(e);\n        if (!_this._isMouseEvent && _this._preventMouseEvent) {\n          _this._allowMouseEvent();\n        }\n        var result = _this._preventMouseEvent || _this.emit(\"dragStart\", __assign(__assign({\n          data: _this.data,\n          datas: _this.data,\n          inputEvent: e,\n          isMouseEvent: _this._isMouseEvent,\n          isSecondaryButton: _this._isSecondaryButton,\n          isTrusted: isTrusted,\n          isDouble: _this.doubleFlag\n        }, _this.getCurrentStore().getPosition()), {\n          preventDefault: function () {\n            e.preventDefault();\n          },\n          preventDrag: function () {\n            _this._dragFlag = false;\n          }\n        }));\n        if (result === false) {\n          _this.stop();\n        }\n        if (_this._isMouseEvent && _this.flag && preventDefault) {\n          e.preventDefault();\n        }\n      }\n      if (!_this.flag) {\n        return false;\n      }\n      var timer = 0;\n      if (isDragStart) {\n        _this._attchDragEvent();\n        // wait pinch\n        if (useTouch && pinchOutside) {\n          timer = setTimeout(function () {\n            addEvent(container, \"touchstart\", _this.onDragStart, {\n              passive: false\n            });\n          });\n        }\n      } else if (useTouch && pinchOutside) {\n        // pinch is occured\n        removeEvent(container, \"touchstart\", _this.onDragStart);\n      }\n      if (_this.flag && isMultiTouch(e)) {\n        clearTimeout(timer);\n        if (isDragStart && e.touches.length !== e.changedTouches.length) {\n          return;\n        }\n        if (!_this.pinchFlag) {\n          _this.onPinchStart(e);\n        }\n      }\n    };\n    _this.onDrag = function (e, isScroll) {\n      if (!_this.flag) {\n        return;\n      }\n      var preventDefault = _this.options.preventDefault;\n      if (!_this._isMouseEvent && preventDefault) {\n        e.preventDefault();\n      }\n      _this._prevInputEvent = e;\n      var clients = getEventClients(e);\n      var result = _this.moveClients(clients, e, false);\n      if (_this._dragFlag) {\n        if (_this.pinchFlag || result.deltaX || result.deltaY) {\n          var dragResult = _this._preventMouseEvent || _this.emit(\"drag\", __assign(__assign({}, result), {\n            isScroll: !!isScroll,\n            inputEvent: e\n          }));\n          if (dragResult === false) {\n            _this.stop();\n            return;\n          }\n        }\n        if (_this.pinchFlag) {\n          _this.onPinch(e, clients);\n        }\n      }\n      _this.getCurrentStore().getPosition(clients, true);\n    };\n    _this.onDragEnd = function (e) {\n      if (!_this.flag) {\n        return;\n      }\n      var _a = _this.options,\n        pinchOutside = _a.pinchOutside,\n        container = _a.container,\n        preventClickEventOnDrag = _a.preventClickEventOnDrag,\n        preventClickEventOnDragStart = _a.preventClickEventOnDragStart,\n        preventClickEventByCondition = _a.preventClickEventByCondition;\n      var isDrag = _this.isDrag;\n      if (preventClickEventOnDrag || preventClickEventOnDragStart || preventClickEventByCondition) {\n        requestAnimationFrame(function () {\n          _this._allowClickEvent();\n        });\n      }\n      if (!preventClickEventByCondition && !preventClickEventOnDragStart && preventClickEventOnDrag && !isDrag) {\n        _this._allowClickEvent();\n      }\n      if (_this._useTouch && pinchOutside) {\n        removeEvent(container, \"touchstart\", _this.onDragStart);\n      }\n      if (_this.pinchFlag) {\n        _this.onPinchEnd(e);\n      }\n      var clients = (e === null || e === void 0 ? void 0 : e.touches) ? getEventClients(e) : [];\n      var clientsLength = clients.length;\n      if (clientsLength === 0 || !_this.options.keepDragging) {\n        _this.flag = false;\n      } else {\n        _this._addStore(new ClientStore(clients));\n      }\n      var position = _this._getPosition();\n      var currentTime = now();\n      var isDouble = !isDrag && _this.doubleFlag;\n      _this._prevInputEvent = null;\n      _this.prevTime = isDrag || isDouble ? 0 : currentTime;\n      if (!_this.flag) {\n        _this._dettachDragEvent();\n        _this._preventMouseEvent || _this.emit(\"dragEnd\", __assign({\n          data: _this.data,\n          datas: _this.data,\n          isDouble: isDouble,\n          isDrag: isDrag,\n          isClick: !isDrag,\n          isMouseEvent: _this._isMouseEvent,\n          isSecondaryButton: _this._isSecondaryButton,\n          inputEvent: e,\n          isTrusted: _this._isTrusted\n        }, position));\n        _this.clientStores = [];\n        if (!_this._isMouseEvent) {\n          _this._preventMouseEvent = true;\n          // Prevent the problem of touch event and mouse event occurring simultaneously\n          clearTimeout(_this._preventMouseEventId);\n          _this._preventMouseEventId = setTimeout(function () {\n            _this._preventMouseEvent = false;\n          }, 200);\n        }\n        _this._isIdle = true;\n      }\n    };\n    _this.onBlur = function () {\n      _this.onDragEnd();\n    };\n    _this._allowClickEvent = function () {\n      removeEvent(_this._window, \"click\", _this._onClick, true);\n    };\n    _this._onClick = function (e) {\n      _this._allowClickEvent();\n      _this._allowMouseEvent();\n      var preventClickEventByCondition = _this.options.preventClickEventByCondition;\n      if (preventClickEventByCondition === null || preventClickEventByCondition === void 0 ? void 0 : preventClickEventByCondition(e)) {\n        return;\n      }\n      e.stopPropagation();\n      e.preventDefault();\n    };\n    _this._onContextMenu = function (e) {\n      var options = _this.options;\n      if (!options.preventRightClick) {\n        e.preventDefault();\n      } else {\n        _this.onDragEnd(e);\n      }\n    };\n    _this._passCallback = function () {};\n    var elements = [].concat(targets);\n    var firstTarget = elements[0];\n    _this._window = isWindow(firstTarget) ? firstTarget : getWindow(firstTarget);\n    _this.options = __assign({\n      checkInput: false,\n      container: firstTarget && !(\"document\" in firstTarget) ? getWindow(firstTarget) : firstTarget,\n      preventRightClick: true,\n      preventWheelClick: true,\n      preventClickEventOnDragStart: false,\n      preventClickEventOnDrag: false,\n      preventClickEventByCondition: null,\n      preventDefault: true,\n      checkWindowBlur: false,\n      keepDragging: false,\n      pinchThreshold: 0,\n      events: [\"touch\", \"mouse\"]\n    }, options);\n    var _a = _this.options,\n      container = _a.container,\n      events = _a.events,\n      checkWindowBlur = _a.checkWindowBlur;\n    _this._useDrag = events.indexOf(\"drag\") > -1;\n    _this._useTouch = events.indexOf(\"touch\") > -1;\n    _this._useMouse = events.indexOf(\"mouse\") > -1;\n    _this.targets = elements;\n    if (_this._useDrag) {\n      elements.forEach(function (el) {\n        addEvent(el, \"dragstart\", _this.onDragStart);\n      });\n    }\n    if (_this._useMouse) {\n      elements.forEach(function (el) {\n        addEvent(el, \"mousedown\", _this.onDragStart);\n        addEvent(el, \"mousemove\", _this._passCallback);\n      });\n      addEvent(container, \"contextmenu\", _this._onContextMenu);\n    }\n    if (checkWindowBlur) {\n      addEvent(getWindow(), \"blur\", _this.onBlur);\n    }\n    if (_this._useTouch) {\n      var passive_1 = {\n        passive: false\n      };\n      elements.forEach(function (el) {\n        addEvent(el, \"touchstart\", _this.onDragStart, passive_1);\n        addEvent(el, \"touchmove\", _this._passCallback, passive_1);\n      });\n    }\n    return _this;\n  }\n  /**\n   * Stop Gesto's drag events.\n   */\n  Gesto.prototype.stop = function () {\n    this.isDrag = false;\n    this.data = {};\n    this.clientStores = [];\n    this.pinchFlag = false;\n    this.doubleFlag = false;\n    this.prevTime = 0;\n    this.flag = false;\n    this._isIdle = true;\n    this._allowClickEvent();\n    this._dettachDragEvent();\n    this._isDragAPI = false;\n  };\n  /**\n   * The total moved distance\n   */\n  Gesto.prototype.getMovement = function (clients) {\n    return this.getCurrentStore().getMovement(clients) + this.clientStores.slice(1).reduce(function (prev, cur) {\n      return prev + cur.movement;\n    }, 0);\n  };\n  /**\n   * Whether to drag\n   */\n  Gesto.prototype.isDragging = function () {\n    return this.isDrag;\n  };\n  /**\n   * Whether the operation of gesto is finished and is in idle state\n   */\n  Gesto.prototype.isIdle = function () {\n    return this._isIdle;\n  };\n  /**\n   * Whether to start drag\n   */\n  Gesto.prototype.isFlag = function () {\n    return this.flag;\n  };\n  /**\n   * Whether to start pinch\n   */\n  Gesto.prototype.isPinchFlag = function () {\n    return this.pinchFlag;\n  };\n  /**\n   * Whether to start double click\n   */\n  Gesto.prototype.isDoubleFlag = function () {\n    return this.doubleFlag;\n  };\n  /**\n   * Whether to pinch\n   */\n  Gesto.prototype.isPinching = function () {\n    return this.isPinch;\n  };\n  /**\n   * If a scroll event occurs, it is corrected by the scroll distance.\n   */\n  Gesto.prototype.scrollBy = function (deltaX, deltaY, e, isCallDrag) {\n    if (isCallDrag === void 0) {\n      isCallDrag = true;\n    }\n    if (!this.flag) {\n      return;\n    }\n    this.clientStores[0].move(deltaX, deltaY);\n    isCallDrag && this.onDrag(e, true);\n  };\n  /**\n   * Create a virtual drag event.\n   */\n  Gesto.prototype.move = function (_a, inputEvent) {\n    var deltaX = _a[0],\n      deltaY = _a[1];\n    var store = this.getCurrentStore();\n    var nextClients = store.prevClients;\n    return this.moveClients(nextClients.map(function (_a) {\n      var clientX = _a.clientX,\n        clientY = _a.clientY;\n      return {\n        clientX: clientX + deltaX,\n        clientY: clientY + deltaY,\n        originalClientX: clientX,\n        originalClientY: clientY\n      };\n    }), inputEvent, true);\n  };\n  /**\n   * The dragStart event is triggered by an external event.\n   */\n  Gesto.prototype.triggerDragStart = function (e) {\n    this.onDragStart(e, false);\n  };\n  /**\n   * Set the event data while dragging.\n   */\n  Gesto.prototype.setEventData = function (data) {\n    var currentData = this.data;\n    for (var name_1 in data) {\n      currentData[name_1] = data[name_1];\n    }\n    return this;\n  };\n  /**\n   * Set the event data while dragging.\n   * Use `setEventData`\n   * @deprecated\n   */\n  Gesto.prototype.setEventDatas = function (data) {\n    return this.setEventData(data);\n  };\n  /**\n   * Get the current event state while dragging.\n   */\n  Gesto.prototype.getCurrentEvent = function (inputEvent) {\n    if (inputEvent === void 0) {\n      inputEvent = this._prevInputEvent;\n    }\n    return __assign(__assign({\n      data: this.data,\n      datas: this.data\n    }, this._getPosition()), {\n      movement: this.getMovement(),\n      isDrag: this.isDrag,\n      isPinch: this.isPinch,\n      isScroll: false,\n      inputEvent: inputEvent\n    });\n  };\n  /**\n   * Get & Set the event data while dragging.\n   */\n  Gesto.prototype.getEventData = function () {\n    return this.data;\n  };\n  /**\n   * Get & Set the event data while dragging.\n   * Use getEventData method\n   * @depreacated\n   */\n  Gesto.prototype.getEventDatas = function () {\n    return this.data;\n  };\n  /**\n   * Unset Gesto\n   */\n  Gesto.prototype.unset = function () {\n    var _this = this;\n    var targets = this.targets;\n    var container = this.options.container;\n    this.off();\n    removeEvent(this._window, \"blur\", this.onBlur);\n    if (this._useDrag) {\n      targets.forEach(function (el) {\n        removeEvent(el, \"dragstart\", _this.onDragStart);\n      });\n    }\n    if (this._useMouse) {\n      targets.forEach(function (target) {\n        removeEvent(target, \"mousedown\", _this.onDragStart);\n      });\n      removeEvent(container, \"contextmenu\", this._onContextMenu);\n    }\n    if (this._useTouch) {\n      targets.forEach(function (target) {\n        removeEvent(target, \"touchstart\", _this.onDragStart);\n      });\n      removeEvent(container, \"touchstart\", this.onDragStart);\n    }\n    this._prevInputEvent = null;\n    this._allowClickEvent();\n    this._dettachDragEvent();\n  };\n  Gesto.prototype.onPinchStart = function (e) {\n    var _this = this;\n    var pinchThreshold = this.options.pinchThreshold;\n    if (this.isDrag && this.getMovement() > pinchThreshold) {\n      return;\n    }\n    var store = new ClientStore(getEventClients(e));\n    this.pinchFlag = true;\n    this._addStore(store);\n    var result = this.emit(\"pinchStart\", __assign(__assign({\n      data: this.data,\n      datas: this.data,\n      angle: store.getAngle(),\n      touches: this.getCurrentStore().getPositions()\n    }, store.getPosition()), {\n      inputEvent: e,\n      isTrusted: this._isTrusted,\n      preventDefault: function () {\n        e.preventDefault();\n      },\n      preventDrag: function () {\n        _this._dragFlag = false;\n      }\n    }));\n    if (result === false) {\n      this.pinchFlag = false;\n    }\n  };\n  Gesto.prototype.onPinch = function (e, clients) {\n    if (!this.flag || !this.pinchFlag || clients.length < 2) {\n      return;\n    }\n    var store = this.getCurrentStore();\n    this.isPinch = true;\n    this.emit(\"pinch\", __assign(__assign({\n      data: this.data,\n      datas: this.data,\n      movement: this.getMovement(clients),\n      angle: store.getAngle(clients),\n      rotation: store.getRotation(clients),\n      touches: store.getPositions(clients),\n      scale: store.getScale(clients),\n      distance: store.getDistance(clients)\n    }, store.getPosition(clients)), {\n      inputEvent: e,\n      isTrusted: this._isTrusted\n    }));\n  };\n  Gesto.prototype.onPinchEnd = function (e) {\n    if (!this.pinchFlag) {\n      return;\n    }\n    var isPinch = this.isPinch;\n    this.isPinch = false;\n    this.pinchFlag = false;\n    var store = this.getCurrentStore();\n    this.emit(\"pinchEnd\", __assign(__assign({\n      data: this.data,\n      datas: this.data,\n      isPinch: isPinch,\n      touches: store.getPositions()\n    }, store.getPosition()), {\n      inputEvent: e\n    }));\n  };\n  Gesto.prototype.getCurrentStore = function () {\n    return this.clientStores[0];\n  };\n  Gesto.prototype.moveClients = function (clients, inputEvent, isAdd) {\n    var position = this._getPosition(clients, isAdd);\n    var isPrevDrag = this.isDrag;\n    if (position.deltaX || position.deltaY) {\n      this.isDrag = true;\n    }\n    var isFirstDrag = false;\n    if (!isPrevDrag && this.isDrag) {\n      isFirstDrag = true;\n    }\n    return __assign(__assign({\n      data: this.data,\n      datas: this.data\n    }, position), {\n      movement: this.getMovement(clients),\n      isDrag: this.isDrag,\n      isPinch: this.isPinch,\n      isScroll: false,\n      isMouseEvent: this._isMouseEvent,\n      isSecondaryButton: this._isSecondaryButton,\n      inputEvent: inputEvent,\n      isTrusted: this._isTrusted,\n      isFirstDrag: isFirstDrag\n    });\n  };\n  Gesto.prototype._addStore = function (store) {\n    this.clientStores.splice(0, 0, store);\n  };\n  Gesto.prototype._getPosition = function (clients, isAdd) {\n    var store = this.getCurrentStore();\n    var position = store.getPosition(clients, isAdd);\n    var _a = this.clientStores.slice(1).reduce(function (prev, cur) {\n        var storePosition = cur.getPosition();\n        prev.distX += storePosition.distX;\n        prev.distY += storePosition.distY;\n        return prev;\n      }, position),\n      distX = _a.distX,\n      distY = _a.distY;\n    return __assign(__assign({}, position), {\n      distX: distX,\n      distY: distY\n    });\n  };\n  Gesto.prototype._attchDragEvent = function () {\n    var win = this._window;\n    var container = this.options.container;\n    var passive = {\n      passive: false\n    };\n    if (this._isDragAPI) {\n      addEvent(container, \"dragover\", this.onDrag, passive);\n      addEvent(win, \"dragend\", this.onDragEnd);\n    }\n    if (this._useMouse) {\n      addEvent(container, \"mousemove\", this.onDrag);\n      addEvent(win, \"mouseup\", this.onDragEnd);\n    }\n    if (this._useTouch) {\n      addEvent(container, \"touchmove\", this.onDrag, passive);\n      addEvent(win, \"touchend\", this.onDragEnd, passive);\n      addEvent(win, \"touchcancel\", this.onDragEnd, passive);\n    }\n  };\n  Gesto.prototype._dettachDragEvent = function () {\n    var win = this._window;\n    var container = this.options.container;\n    if (this._isDragAPI) {\n      removeEvent(container, \"dragover\", this.onDrag);\n      removeEvent(win, \"dragend\", this.onDragEnd);\n    }\n    if (this._useMouse) {\n      removeEvent(container, \"mousemove\", this.onDrag);\n      removeEvent(win, \"mouseup\", this.onDragEnd);\n    }\n    if (this._useTouch) {\n      removeEvent(container, \"touchstart\", this.onDragStart);\n      removeEvent(container, \"touchmove\", this.onDrag);\n      removeEvent(win, \"touchend\", this.onDragEnd);\n      removeEvent(win, \"touchcancel\", this.onDragEnd);\n    }\n  };\n  Gesto.prototype._allowMouseEvent = function () {\n    this._preventMouseEvent = false;\n    clearTimeout(this._preventMouseEventId);\n  };\n  return Gesto;\n}(EventEmitter);\nexport { Gesto as default };","map":{"version":3,"names":["extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__extends","__","constructor","prototype","create","__assign","assign","t","s","i","n","arguments","length","call","apply","getRad","pos1","pos2","distX","distY","rad","Math","atan2","PI","getRotatiion","touches","clientX","clientY","isMultiTouch","e","getEventClients","getClients","getClient","isMouseEvent","type","indexOf","getPosition","clients","prevClients","startClients","_a","getAverageClient","originalClientX","originalClientY","_b","prevX","prevY","_c","startX","startY","deltaX","deltaY","getDist","sqrt","pow","min","push","sumClient","minLength","client","ClientStore","movement","getAngle","getRotation","isAdd","position","getPositions","positions","getMovement","currentClient","prevClient","getDistance","getScale","move","forEach","INPUT_TAGNAMES","Gesto","_super","targets","options","_this","flag","pinchFlag","data","isDrag","isPinch","clientStores","prevTime","doubleFlag","_useMouse","_useTouch","_useDrag","_dragFlag","_isTrusted","_isMouseEvent","_isSecondaryButton","_preventMouseEvent","_prevInputEvent","_isDragAPI","_isIdle","_preventMouseEventId","_window","window","onDragStart","isTrusted","cancelable","isDragAPI","container","pinchOutside","preventWheelClick","preventRightClick","preventDefault","checkInput","dragFocusedInput","preventClickEventOnDragStart","preventClickEventOnDrag","preventClickEventByCondition","useTouch","isDragStart","which","button","stop","activeElement","document","target","tagName","toLowerCase","hasInput","hasContentEditable","isContentEditable","contains","blur","activeTagName","addEvent","_onClick","now","_allowMouseEvent","result","emit","datas","inputEvent","isSecondaryButton","isDouble","getCurrentStore","preventDrag","timer","_attchDragEvent","setTimeout","passive","removeEvent","clearTimeout","changedTouches","onPinchStart","onDrag","isScroll","moveClients","dragResult","onPinch","onDragEnd","requestAnimationFrame","_allowClickEvent","onPinchEnd","clientsLength","keepDragging","_addStore","_getPosition","currentTime","_dettachDragEvent","isClick","onBlur","stopPropagation","_onContextMenu","_passCallback","elements","concat","firstTarget","isWindow","getWindow","checkWindowBlur","pinchThreshold","events","el","passive_1","slice","reduce","prev","cur","isDragging","isIdle","isFlag","isPinchFlag","isDoubleFlag","isPinching","scrollBy","isCallDrag","store","nextClients","map","triggerDragStart","setEventData","currentData","name_1","setEventDatas","getCurrentEvent","getEventData","getEventDatas","unset","off","angle","rotation","scale","distance","isPrevDrag","isFirstDrag","splice","storePosition","win","EventEmitter"],"sources":["/Users/toshi/Document/AI/engineeringAI/QAservice/frontend/node_modules/gesto/node_modules/tslib/tslib.es6.js","/Users/toshi/Document/AI/engineeringAI/QAservice/frontend/node_modules/gesto/src/utils.ts","/Users/toshi/Document/AI/engineeringAI/QAservice/frontend/node_modules/gesto/src/ClientStore.ts","/Users/toshi/Document/AI/engineeringAI/QAservice/frontend/node_modules/gesto/src/Gesto.ts"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __createBinding(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","import { Client, Position } from \"./types\";\nimport { IArrayFormat, isNumber } from \"@daybrush/utils\";\n\nexport function getRad(pos1: number[], pos2: number[]) {\n    const distX = pos2[0] - pos1[0];\n    const distY = pos2[1] - pos1[1];\n    const rad = Math.atan2(distY, distX);\n\n    return rad >= 0 ? rad : rad + Math.PI * 2;\n}\n\nexport function getRotatiion(touches: Client[]) {\n    return getRad([\n        touches[0].clientX,\n        touches[0].clientY,\n    ], [\n        touches[1].clientX,\n        touches[1].clientY,\n    ]) / Math.PI * 180;\n}\n\nexport function isMultiTouch(e: any): e is TouchEvent {\n    return e.touches && e.touches.length >= 2;\n}\nexport function getEventClients(e: any): Client[] {\n    if (!e) {\n        return [];\n    } if (e.touches) {\n        return getClients(e.touches);\n    } else {\n        return [getClient(e)];\n    }\n}\nexport function isMouseEvent(e: any): e is MouseEvent {\n    return e && (e.type.indexOf(\"mouse\") > -1 || \"button\" in e);\n}\nexport function getPosition(clients: Client[], prevClients: Client[], startClients: Client[]): Position {\n    const length = startClients.length;\n    const {\n        clientX,\n        clientY,\n        originalClientX,\n        originalClientY,\n    } = getAverageClient(clients, length);\n    const {\n        clientX: prevX,\n        clientY: prevY,\n    } = getAverageClient(prevClients, length);\n\n    const {\n        clientX: startX,\n        clientY: startY,\n    } = getAverageClient(startClients, length);\n    const deltaX = clientX - prevX;\n    const deltaY = clientY - prevY;\n    const distX = clientX - startX;\n    const distY = clientY - startY;\n\n    return {\n        clientX: originalClientX!,\n        clientY: originalClientY!,\n        deltaX,\n        deltaY,\n        distX,\n        distY,\n    };\n}\nexport function getDist(clients: Client[]) {\n    return Math.sqrt(\n        Math.pow(clients[0].clientX - clients[1].clientX, 2)\n        + Math.pow(clients[0].clientY - clients[1].clientY, 2),\n    );\n}\nexport function getClients(touches: IArrayFormat<Touch>) {\n    const length = Math.min(touches.length, 2);\n    const clients = [];\n\n    for (let i = 0; i < length; ++i) {\n        clients.push(getClient(touches[i]));\n    }\n    return clients;\n}\nexport function getClient(e: MouseEvent | Touch): Client {\n    return {\n        clientX: e.clientX,\n        clientY: e.clientY,\n    };\n}\nexport function getAverageClient(clients: Client[], length = clients.length): Required<Client> {\n    const sumClient: Required<Client> = {\n        clientX: 0,\n        clientY: 0,\n        originalClientX: 0,\n        originalClientY: 0,\n    };\n    const minLength = Math.min(clients.length, length);\n\n    for (let i = 0; i < minLength; ++i) {\n        const client = clients[i];\n\n        sumClient.originalClientX += \"originalClientX\" in client ? client.originalClientX! : client.clientX;\n        sumClient.originalClientY += \"originalClientY\" in client ? client.originalClientY! : client.clientY;\n        sumClient.clientX += client.clientX;\n        sumClient.clientY += client.clientY;\n    }\n    if (!length) {\n        return sumClient;\n    }\n    return {\n        clientX: sumClient.clientX / length,\n        clientY: sumClient.clientY / length,\n        originalClientX: sumClient.originalClientX / length,\n        originalClientY: sumClient.originalClientY / length,\n    };\n}\nexport function plueClient(client1: Client, client2: Client) {\n    return {\n        clientX: (client1.clientX + client2.clientX),\n        clientY: (client1.clientY + client2.clientY),\n    };\n}\n\nexport function minusClient(client1: Client, client2: Client) {\n    return {\n        clientX: (client1.clientX - client2.clientX),\n        clientY: (client1.clientY - client2.clientY),\n    };\n}\n","import { Client, Position } from \"./types\";\nimport { getPosition, getDist, getRotatiion, getAverageClient } from \"./utils\";\n\nexport class ClientStore {\n    public prevClients: Client[] = [];\n    public startClients: Client[] = [];\n    public movement = 0;\n    public length  = 0;\n    constructor(clients: Client[]) {\n        this.startClients = clients;\n        this.prevClients = clients;\n        this.length = clients.length;\n    }\n    public getAngle(clients: Client[] = this.prevClients) {\n        return getRotatiion(clients);\n    }\n    public getRotation(clients: Client[] = this.prevClients) {\n        return getRotatiion(clients) - getRotatiion(this.startClients);\n    }\n    public getPosition(clients: Client[] = this.prevClients, isAdd?: boolean) {\n        const position = getPosition(clients || this.prevClients, this.prevClients, this.startClients);\n\n        const { deltaX, deltaY } = position;\n\n        this.movement += Math.sqrt(deltaX * deltaX + deltaY * deltaY);\n        this.prevClients = clients;\n\n        return position;\n    }\n    public getPositions(clients: Client[] = this.prevClients) {\n        const prevClients = this.prevClients;\n        const startClients = this.startClients;\n        const minLength = Math.min(this.length, prevClients.length);\n        const positions: Position[] = [];\n\n        for (let i = 0; i < minLength; ++i) {\n            positions[i] = getPosition([clients[i]], [prevClients[i]], [startClients[i]]);\n        }\n\n        return positions;\n    }\n    public getMovement(clients?: Client[]) {\n        const movement = this.movement;\n\n        if (!clients) {\n            return movement;\n        }\n        const currentClient = getAverageClient(clients, this.length);\n        const prevClient = getAverageClient(this.prevClients, this.length);\n        const deltaX = currentClient.clientX - prevClient.clientX;\n        const deltaY = currentClient.clientY - prevClient.clientY;\n\n        return Math.sqrt(deltaX * deltaX + deltaY * deltaY) + movement;\n    }\n    public getDistance(clients = this.prevClients) {\n        return getDist(clients);\n    }\n    public getScale(clients = this.prevClients) {\n        return getDist(clients) / getDist(this.startClients);\n    }\n    public move(deltaX: number, deltaY: number) {\n        this.startClients.forEach(client => {\n            client.clientX -= deltaX;\n            client.clientY -= deltaY;\n        });\n        this.prevClients.forEach(client => {\n            client.clientX -= deltaX;\n            client.clientY -= deltaY;\n        });\n    }\n}\n","import { Client, OnDrag, GestoOptions, GestoEvents } from \"./types\";\nimport {\n    getEventClients, isMouseEvent, isMultiTouch,\n} from \"./utils\";\nimport EventEmitter, { TargetParam } from \"@scena/event-emitter\";\nimport { addEvent, removeEvent, now, IObject, getWindow, isWindow } from \"@daybrush/utils\";\nimport { ClientStore } from \"./ClientStore\";\n\nconst INPUT_TAGNAMES = [\"textarea\", \"input\"];\n/**\n * You can set up drag, pinch events in any browser.\n */\nclass Gesto extends EventEmitter<GestoEvents> {\n    public options: GestoOptions = {};\n\n    private flag = false;\n    private pinchFlag = false;\n    private data: IObject<any> = {};\n    private isDrag = false;\n    private isPinch = false;\n\n    private clientStores: ClientStore[] = [];\n    private targets: Array<Element | Window> = [];\n    private prevTime: number = 0;\n    private doubleFlag: boolean = false;\n    private _useMouse = false;\n    private _useTouch = false;\n    private _useDrag = false;\n    private _dragFlag = false;\n    private _isTrusted = false;\n    private _isMouseEvent = false;\n    private _isSecondaryButton = false;\n    private _preventMouseEvent = false;\n    private _prevInputEvent: any = null;\n    private _isDragAPI = false;\n    private _isIdle = true;\n    private _preventMouseEventId = 0;\n    private _window: WindowProxy = window;\n\n    /**\n     *\n     */\n    constructor(targets: Array<Element | Window> | Element | Window, options: GestoOptions = {}) {\n        super();\n        const elements = [].concat(targets as any) as Array<Element | Window>;\n        const firstTarget = elements[0];\n\n        this._window = isWindow(firstTarget) ? firstTarget : getWindow(firstTarget);\n        this.options = {\n            checkInput: false,\n            container: firstTarget && !(\"document\" in firstTarget)  ? getWindow(firstTarget) : firstTarget,\n            preventRightClick: true,\n            preventWheelClick: true,\n            preventClickEventOnDragStart: false,\n            preventClickEventOnDrag: false,\n            preventClickEventByCondition: null,\n            preventDefault: true,\n            checkWindowBlur: false,\n            keepDragging: false,\n            pinchThreshold: 0,\n            events: [\"touch\", \"mouse\"],\n            ...options,\n        };\n\n        const { container, events, checkWindowBlur } = this.options;\n\n        this._useDrag = events!.indexOf(\"drag\") > -1;\n        this._useTouch = events!.indexOf(\"touch\") > -1;\n        this._useMouse = events!.indexOf(\"mouse\") > -1;\n        this.targets = elements;\n\n        if (this._useDrag) {\n            elements.forEach(el => {\n                addEvent(el, \"dragstart\", this.onDragStart);\n            });\n        }\n        if (this._useMouse) {\n            elements.forEach(el => {\n                addEvent(el, \"mousedown\", this.onDragStart);\n                addEvent(el, \"mousemove\", this._passCallback);\n            });\n            addEvent(container!, \"contextmenu\", this._onContextMenu);\n        }\n        if (checkWindowBlur) {\n            addEvent(getWindow(), \"blur\", this.onBlur);\n        }\n        if (this._useTouch) {\n            const passive = {\n                passive: false,\n            };\n            elements.forEach(el => {\n                addEvent(el, \"touchstart\", this.onDragStart, passive);\n                addEvent(el, \"touchmove\", this._passCallback, passive);\n            });\n        }\n    }\n    /**\n     * Stop Gesto's drag events.\n     */\n    public stop() {\n        this.isDrag = false;\n        this.data = {};\n        this.clientStores = [];\n        this.pinchFlag = false;\n        this.doubleFlag = false;\n        this.prevTime = 0;\n        this.flag = false;\n        this._isIdle = true;\n\n        this._allowClickEvent();\n        this._dettachDragEvent();\n        this._isDragAPI = false;\n    }\n    /**\n     * The total moved distance\n     */\n    public getMovement(clients?: Client[]) {\n        return this.getCurrentStore().getMovement(clients) + this.clientStores.slice(1).reduce((prev, cur) => {\n            return prev + cur.movement;\n        }, 0);\n    }\n    /**\n     * Whether to drag\n     */\n    public isDragging(): boolean {\n        return this.isDrag;\n    }\n    /**\n     * Whether the operation of gesto is finished and is in idle state\n     */\n    public isIdle(): boolean {\n        return this._isIdle;\n    }\n    /**\n     * Whether to start drag\n     */\n    public isFlag(): boolean {\n        return this.flag;\n    }\n    /**\n     * Whether to start pinch\n     */\n    public isPinchFlag() {\n        return this.pinchFlag;\n    }\n    /**\n     * Whether to start double click\n     */\n    public isDoubleFlag() {\n        return this.doubleFlag;\n    }\n    /**\n     * Whether to pinch\n     */\n    public isPinching() {\n        return this.isPinch;\n    }\n\n    /**\n     * If a scroll event occurs, it is corrected by the scroll distance.\n     */\n    public scrollBy(deltaX: number, deltaY: number, e: any, isCallDrag: boolean = true) {\n        if (!this.flag) {\n            return;\n        }\n        this.clientStores[0].move(deltaX, deltaY);\n        isCallDrag && this.onDrag(e, true);\n    }\n    /**\n     * Create a virtual drag event.\n     */\n    public move([deltaX, deltaY]: number[], inputEvent: any): TargetParam<OnDrag> {\n        const store = this.getCurrentStore();\n        const nextClients = store.prevClients;\n\n        return this.moveClients(nextClients.map(({ clientX, clientY }) => {\n            return {\n                clientX: clientX + deltaX,\n                clientY: clientY + deltaY,\n                originalClientX: clientX,\n                originalClientY: clientY,\n            };\n        }), inputEvent, true);\n    }\n    /**\n     * The dragStart event is triggered by an external event.\n     */\n    public triggerDragStart(e: any) {\n        this.onDragStart(e, false);\n    }\n    /**\n     * Set the event data while dragging.\n     */\n    public setEventData(data: IObject<any>) {\n        const currentData = this.data;\n\n        for (const name in data) {\n            currentData[name] = data[name];\n        }\n        return this;\n    }\n    /**\n     * Set the event data while dragging.\n     * Use `setEventData`\n     * @deprecated\n     */\n    public setEventDatas(data: IObject<any>) {\n        return this.setEventData(data);\n    }\n    /**\n     * Get the current event state while dragging.\n     */\n    public getCurrentEvent(inputEvent: any = this._prevInputEvent) {\n        return {\n            data: this.data,\n            datas: this.data,\n            ...this._getPosition(),\n            movement: this.getMovement(),\n            isDrag: this.isDrag,\n            isPinch: this.isPinch,\n            isScroll: false,\n            inputEvent,\n        };\n    }\n    /**\n     * Get & Set the event data while dragging.\n     */\n    public getEventData() {\n        return this.data;\n    }\n    /**\n     * Get & Set the event data while dragging.\n     * Use getEventData method\n     * @depreacated\n     */\n    public getEventDatas() {\n        return this.data;\n    }\n    /**\n     * Unset Gesto\n     */\n    public unset() {\n        const targets = this.targets;\n        const container = this.options.container!;\n\n        this.off();\n        removeEvent(this._window, \"blur\", this.onBlur);\n\n        if (this._useDrag) {\n            targets.forEach(el => {\n                removeEvent(el, \"dragstart\", this.onDragStart);\n            });\n        }\n        if (this._useMouse) {\n            targets.forEach(target => {\n                removeEvent(target, \"mousedown\", this.onDragStart);\n            });\n            removeEvent(container, \"contextmenu\", this._onContextMenu);\n        }\n        if (this._useTouch) {\n            targets.forEach(target => {\n                removeEvent(target, \"touchstart\", this.onDragStart);\n            });\n            removeEvent(container, \"touchstart\", this.onDragStart);\n        }\n        this._prevInputEvent = null;\n        this._allowClickEvent();\n        this._dettachDragEvent();\n    }\n    public onDragStart = (e: any, isTrusted = true) => {\n        if (!this.flag && e.cancelable === false) {\n            return;\n        }\n        const isDragAPI = e.type.indexOf(\"drag\") >= -1;\n\n        if (this.flag && isDragAPI) {\n            return;\n        }\n\n        this._isDragAPI = true;\n        const {\n            container,\n            pinchOutside,\n            preventWheelClick,\n            preventRightClick,\n            preventDefault,\n            checkInput,\n            dragFocusedInput,\n            preventClickEventOnDragStart,\n            preventClickEventOnDrag,\n            preventClickEventByCondition,\n        } = this.options;\n        const useTouch = this._useTouch;\n        const isDragStart = !this.flag;\n\n        this._isSecondaryButton = e.which === 3 || e.button === 2;\n\n        if (\n            (preventWheelClick && (e.which === 2 || e.button === 1))\n            || (preventRightClick && (e.which === 3 || e.button === 2))\n        ) {\n            this.stop();\n            return false;\n        }\n\n        if (isDragStart) {\n            const activeElement = this._window.document.activeElement as HTMLElement;\n            const target = e.target as HTMLElement;\n\n            if (target) {\n                const tagName = target.tagName.toLowerCase();\n                const hasInput = INPUT_TAGNAMES.indexOf(tagName) > -1;\n                const hasContentEditable = target.isContentEditable;\n\n                if (hasInput || hasContentEditable) {\n                    if (checkInput || (!dragFocusedInput && activeElement === target)) {\n                        // force false or already focused.\n                        return false;\n                    }\n                    // no focus\n                    if (activeElement && (\n                        activeElement === target\n                        || (hasContentEditable && activeElement.isContentEditable && activeElement.contains(target))\n                    )) {\n                        if (dragFocusedInput) {\n                            target.blur();\n                        } else {\n                            return false;\n                        }\n                    }\n                } else if ((preventDefault || e.type === \"touchstart\") && activeElement) {\n                    const activeTagName = activeElement.tagName.toLowerCase();\n\n                    if (activeElement.isContentEditable || INPUT_TAGNAMES.indexOf(activeTagName) > -1) {\n                        activeElement.blur();\n                    }\n                }\n\n                if (preventClickEventOnDragStart || preventClickEventOnDrag || preventClickEventByCondition) {\n                    addEvent(this._window, \"click\", this._onClick, true);\n                }\n            }\n            this.clientStores = [new ClientStore(getEventClients(e))];\n            this._isIdle = false;\n            this.flag = true;\n            this.isDrag = false;\n            this._isTrusted = isTrusted;\n            this._dragFlag = true;\n            this._prevInputEvent = e;\n            this.data = {};\n\n            this.doubleFlag = now() - this.prevTime < 200;\n            this._isMouseEvent = isMouseEvent(e);\n            if (!this._isMouseEvent && this._preventMouseEvent) {\n                this._allowMouseEvent();\n            }\n\n            const result = this._preventMouseEvent || this.emit(\"dragStart\", {\n                data: this.data,\n                datas: this.data,\n                inputEvent: e,\n                isMouseEvent: this._isMouseEvent,\n                isSecondaryButton: this._isSecondaryButton,\n                isTrusted,\n                isDouble: this.doubleFlag,\n                ...this.getCurrentStore().getPosition(),\n                preventDefault() {\n                    e.preventDefault();\n                },\n                preventDrag: () => {\n                    this._dragFlag = false;\n                },\n            });\n            if (result === false) {\n                this.stop();\n            }\n            if (this._isMouseEvent && this.flag && preventDefault) {\n                e.preventDefault();\n            }\n        }\n        if (!this.flag) {\n            return false;\n        }\n        let timer = 0;\n\n        if (isDragStart) {\n            this._attchDragEvent();\n\n            // wait pinch\n            if (useTouch && pinchOutside) {\n                timer = setTimeout(() => {\n                    addEvent(container!, \"touchstart\", this.onDragStart, {\n                        passive: false\n                    });\n                });\n            }\n        } else if (useTouch && pinchOutside) {\n            // pinch is occured\n            removeEvent(container!, \"touchstart\", this.onDragStart);\n        }\n        if (this.flag && isMultiTouch(e)) {\n            clearTimeout(timer);\n            if (isDragStart && (e.touches.length !== e.changedTouches.length)) {\n                return;\n            }\n            if (!this.pinchFlag) {\n                this.onPinchStart(e);\n            }\n        }\n\n    }\n    public onDrag = (e: any, isScroll?: boolean) => {\n        if (!this.flag) {\n            return;\n        }\n        const {\n            preventDefault,\n        } = this.options;\n        if (!this._isMouseEvent && preventDefault) {\n            e.preventDefault();\n        }\n        this._prevInputEvent = e;\n        const clients = getEventClients(e);\n        const result = this.moveClients(clients, e, false);\n\n        if (this._dragFlag) {\n            if (this.pinchFlag || result.deltaX || result.deltaY) {\n                const dragResult = this._preventMouseEvent || this.emit(\"drag\", {\n                    ...result,\n                    isScroll: !!isScroll,\n                    inputEvent: e,\n                });\n\n                if (dragResult === false) {\n                    this.stop();\n                    return;\n                }\n            }\n            if (this.pinchFlag) {\n                this.onPinch(e, clients);\n            }\n        }\n\n        this.getCurrentStore().getPosition(clients, true);\n    }\n    public onDragEnd = (e?: any) => {\n        if (!this.flag) {\n            return;\n        }\n        const {\n            pinchOutside,\n            container,\n            preventClickEventOnDrag,\n            preventClickEventOnDragStart,\n            preventClickEventByCondition,\n        } = this.options;\n        const isDrag = this.isDrag;\n\n        if (preventClickEventOnDrag || preventClickEventOnDragStart || preventClickEventByCondition) {\n            requestAnimationFrame(() => {\n                this._allowClickEvent();\n            });\n        }\n        if (!preventClickEventByCondition && !preventClickEventOnDragStart && preventClickEventOnDrag && !isDrag) {\n            this._allowClickEvent();\n        }\n\n        if (this._useTouch && pinchOutside) {\n            removeEvent(container!, \"touchstart\", this.onDragStart);\n        }\n        if (this.pinchFlag) {\n            this.onPinchEnd(e);\n        }\n        const clients = e?.touches ? getEventClients(e) : [];\n        const clientsLength = clients.length;\n\n        if (clientsLength === 0 || !this.options.keepDragging) {\n            this.flag = false;\n        } else {\n            this._addStore(new ClientStore(clients));\n        }\n\n\n        const position = this._getPosition();\n        const currentTime = now();\n        const isDouble = !isDrag && this.doubleFlag;\n\n        this._prevInputEvent = null;\n        this.prevTime = isDrag || isDouble ? 0 : currentTime;\n\n        if (!this.flag) {\n            this._dettachDragEvent();\n\n            this._preventMouseEvent || this.emit(\"dragEnd\", {\n                data: this.data,\n                datas: this.data,\n                isDouble,\n                isDrag: isDrag,\n                isClick: !isDrag,\n                isMouseEvent: this._isMouseEvent,\n                isSecondaryButton: this._isSecondaryButton,\n                inputEvent: e,\n                isTrusted: this._isTrusted,\n                ...position,\n            });\n\n            this.clientStores = [];\n\n            if (!this._isMouseEvent) {\n                this._preventMouseEvent = true;\n\n                // Prevent the problem of touch event and mouse event occurring simultaneously\n                clearTimeout(this._preventMouseEventId);\n                this._preventMouseEventId = setTimeout(() => {\n                    this._preventMouseEvent = false;\n                }, 200);\n            }\n            this._isIdle = true;\n        }\n    }\n    public onPinchStart(e: TouchEvent) {\n        const { pinchThreshold } = this.options;\n\n        if (this.isDrag && this.getMovement() > pinchThreshold!) {\n            return;\n        }\n        const store = new ClientStore(getEventClients(e));\n\n        this.pinchFlag = true;\n        this._addStore(store);\n\n        const result = this.emit(\"pinchStart\", {\n            data: this.data,\n            datas: this.data,\n            angle: store.getAngle(),\n            touches: this.getCurrentStore().getPositions(),\n            ...store.getPosition(),\n            inputEvent: e,\n            isTrusted: this._isTrusted,\n            preventDefault() {\n                e.preventDefault();\n            },\n            preventDrag: () => {\n                this._dragFlag = false;\n            },\n        });\n\n        if (result === false) {\n            this.pinchFlag = false;\n        }\n    }\n    public onPinch(e: TouchEvent, clients: Client[]) {\n        if (!this.flag || !this.pinchFlag || clients.length < 2) {\n            return;\n        }\n\n        const store = this.getCurrentStore();\n        this.isPinch = true;\n\n        this.emit(\"pinch\", {\n            data: this.data,\n            datas: this.data,\n            movement: this.getMovement(clients),\n            angle: store.getAngle(clients),\n            rotation: store.getRotation(clients),\n            touches: store.getPositions(clients),\n            scale: store.getScale(clients),\n            distance: store.getDistance(clients),\n            ...store.getPosition(clients),\n            inputEvent: e,\n            isTrusted: this._isTrusted,\n        });\n    }\n    public onPinchEnd(e: TouchEvent) {\n        if (!this.pinchFlag) {\n            return;\n        }\n        const isPinch = this.isPinch;\n\n        this.isPinch = false;\n        this.pinchFlag = false;\n        const store = this.getCurrentStore();\n        this.emit(\"pinchEnd\", {\n            data: this.data,\n            datas: this.data,\n            isPinch,\n            touches: store.getPositions(),\n            ...store.getPosition(),\n            inputEvent: e,\n        });\n    }\n    private getCurrentStore() {\n        return this.clientStores[0];\n    }\n    private moveClients(clients: Client[], inputEvent: any, isAdd: boolean): TargetParam<OnDrag> {\n        const position = this._getPosition(clients, isAdd);\n\n        const isPrevDrag = this.isDrag;\n\n        if (position.deltaX || position.deltaY) {\n            this.isDrag = true;\n        }\n        let isFirstDrag = false;\n\n        if (!isPrevDrag && this.isDrag) {\n            isFirstDrag = true;\n        }\n\n        return {\n            data: this.data,\n            datas: this.data,\n            ...position,\n            movement: this.getMovement(clients),\n            isDrag: this.isDrag,\n            isPinch: this.isPinch,\n            isScroll: false,\n            isMouseEvent: this._isMouseEvent,\n            isSecondaryButton: this._isSecondaryButton,\n            inputEvent,\n            isTrusted: this._isTrusted,\n            isFirstDrag,\n        };\n    }\n    private onBlur = () => {\n        this.onDragEnd();\n    }\n    private _addStore(store: ClientStore) {\n        this.clientStores.splice(0, 0, store);\n    }\n    private _getPosition(clients?: Client[], isAdd?: boolean) {\n        const store = this.getCurrentStore();\n        const position = store.getPosition(clients, isAdd);\n\n        const { distX, distY } = this.clientStores.slice(1).reduce((prev, cur) => {\n            const storePosition = cur.getPosition();\n\n            prev.distX += storePosition.distX;\n            prev.distY += storePosition.distY;\n            return prev;\n        }, position);\n\n        return {\n            ...position,\n            distX,\n            distY,\n        };\n    }\n    private _allowClickEvent = () => {\n        removeEvent(this._window, \"click\", this._onClick, true);\n    };\n    private _attchDragEvent() {\n        const win = this._window;\n        const container = this.options.container!;\n        const passive = {\n            passive: false\n        };\n\n        if (this._isDragAPI) {\n            addEvent(container, \"dragover\", this.onDrag, passive);\n            addEvent(win, \"dragend\", this.onDragEnd);\n        }\n        if (this._useMouse) {\n            addEvent(container, \"mousemove\", this.onDrag);\n            addEvent(win, \"mouseup\", this.onDragEnd);\n        }\n\n        if (this._useTouch) {\n            addEvent(container, \"touchmove\", this.onDrag, passive);\n            addEvent(win, \"touchend\", this.onDragEnd, passive);\n            addEvent(win, \"touchcancel\", this.onDragEnd, passive);\n        }\n    };\n    private _dettachDragEvent() {\n        const win = this._window;\n        const container = this.options.container!;\n\n        if (this._isDragAPI) {\n            removeEvent(container, \"dragover\", this.onDrag);\n            removeEvent(win, \"dragend\", this.onDragEnd);\n        }\n        if (this._useMouse) {\n            removeEvent(container, \"mousemove\", this.onDrag);\n            removeEvent(win, \"mouseup\", this.onDragEnd);\n        }\n\n        if (this._useTouch) {\n            removeEvent(container, \"touchstart\", this.onDragStart);\n            removeEvent(container, \"touchmove\", this.onDrag);\n            removeEvent(win, \"touchend\", this.onDragEnd);\n            removeEvent(win, \"touchcancel\", this.onDragEnd);\n        }\n    };\n    private _onClick = (e: MouseEvent) => {\n        this._allowClickEvent();\n        this._allowMouseEvent();\n\n        const preventClickEventByCondition = this.options.preventClickEventByCondition;\n        if (preventClickEventByCondition?.(e)) {\n            return;\n        }\n        e.stopPropagation();\n        e.preventDefault();\n    }\n    private _onContextMenu = (e: MouseEvent) => {\n        const options = this.options;\n        if (!options.preventRightClick) {\n            e.preventDefault();\n        } else {\n            this.onDragEnd(e);\n        }\n    }\n    private _allowMouseEvent() {\n        this._preventMouseEvent = false;\n        clearTimeout(this._preventMouseEventId);\n    }\n    private _passCallback = () => { };\n}\n\nexport default Gesto;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}